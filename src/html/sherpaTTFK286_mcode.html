<pre class="code">
<span class="srcline"><span class="lineno"><a href="100,1" id="srcline1"> 1</a></span><span class="line"><span class="comment">%SHERPATTFK Calcluates the Cartesian position of the wheel contact point</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">%relative to the pan coordinate frame for the SherpaTT Leg.</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,4" id="srcline4"> 4</a></span><span class="line"><span class="comment">%Inputs:</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,5" id="srcline5"> 5</a></span><span class="line"><span class="comment">%-q: A 1x3 vector containing the joint angular positions [alpha beta gamma]</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,6" id="srcline6"> 6</a></span><span class="line"><span class="comment">%-kC: A struct containing the kinematic constants of the SherpaTT leg.</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,7" id="srcline7"> 7</a></span><span class="line"><span class="comment">%Outputs:</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,8" id="srcline8"> 8</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,9" id="srcline9"> 9</a></span><span class="line"><span class="comment">%sherpaTTFK.m</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,10" id="srcline10">10</a></span><span class="line"><span class="comment">%author: wreid</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,11" id="srcline11">11</a></span><span class="line"><span class="comment">%date: 20150122</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,12" id="srcline12">12</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="100,13" id="srcline13">13</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S2T48U3">u</span> = sherpaTTFK(<span class="var type1" id="S3T48U6">q</span>,<span class="var type1" id="S4T7U7">kC</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="100,14" id="srcline14">14</a></span><span class="line"><span class="comment">%sherpaTTFK Sherpa_TT Forward Kinematics</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,15" id="srcline15">15</a></span><span class="line"><span class="comment">%   Calculates the x,y,z position of the contact point given the alpha,</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,16" id="srcline16">16</a></span><span class="line"><span class="comment">%   beta and gamma joint values.</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,17" id="srcline17">17</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="100,18" id="srcline18">18</a></span><span class="line">    <span class="mxinfo " id="T4:U4"><span class="var type1" id="S5T4U10">alpha</span> = <span class="mxinfo " id="T4:U6"><span class="var type1" id="S3T48U12">q</span>(<span class="mxinfo " id="T4:U8">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,19" id="srcline19">19</a></span><span class="line">    <span class="mxinfo " id="T4:U9"><span class="var type1" id="S6T4U16">beta</span> = <span class="mxinfo " id="T4:U11"><span class="var type1" id="S3T48U18">q</span>(<span class="mxinfo " id="T4:U13">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,20" id="srcline20">20</a></span><span class="line">    <span class="mxinfo " id="T4:U14"><span class="var type1" id="S7T4U22">gamma</span> = <span class="mxinfo " id="T4:U16"><span class="var type1" id="S3T48U24">q</span>(<span class="mxinfo " id="T4:U18">3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,21" id="srcline21">21</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="100,22" id="srcline22">22</a></span><span class="line">    <span class="mxinfo " id="T48:U19"><span class="var type1" id="S2T48U28">u</span> = <span class="mxinfo " id="T48:U21">zeros(<span class="mxinfo " id="T4:U22">1</span>,<span class="mxinfo " id="T4:U23">3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,23" id="srcline23">23</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="100,24" id="srcline24">24</a></span><span class="line">    <span class="mxinfo " id="T4:U24"><span class="mxinfo " id="T4:U25"><span class="var type1" id="S2T48U36">u</span>(<span class="mxinfo " id="T4:U27">1</span>)</span> = <span class="mxinfo " id="T4:U28">(<span class="mxinfo " id="T4:U29"><span class="mxinfo " id="T4:U30"><span class="mxinfo " id="T4:U31"><span class="mxinfo " id="T4:U32"><span class="mxinfo " id="T4:U33"><span class="var type1" id="S4T7U45">kC</span>.l2</span> + <span class="mxinfo " id="T4:U35"><span class="mxinfo " id="T4:U36"><span class="var type1" id="S4T7U49">kC</span>.l3</span>*<span class="mxinfo " id="T4:U38">cos(<span class="mxinfo " id="T4:U39">-<span class="var type1" id="S6T4U54">beta</span></span>)</span></span></span>+<span class="mxinfo " id="T4:U41"><span class="mxinfo " id="T4:U42"><span class="var type1" id="S4T7U57">kC</span>.l4</span>*<span class="mxinfo " id="T4:U44">cos(<span class="mxinfo " id="T4:U45"><span class="var type1" id="S4T7U62">kC</span>.zeta</span>)</span></span></span>+<span class="mxinfo " id="T4:U47"><span class="mxinfo " id="T4:U48"><span class="var type1" id="S4T7U66">kC</span>.l5</span>*<span class="mxinfo " id="T4:U50">cos(<span class="mxinfo " id="T4:U51"><span class="var type1" id="S7T4U71">gamma</span>+<span class="mxinfo " id="T4:U53"><span class="var type1" id="S4T7U73">kC</span>.zeta</span></span>)</span></span></span>-<span class="mxinfo " id="T4:U55"><span class="var type1" id="S4T7U76">kC</span>.l7</span></span>).*<span class="mxinfo " id="T4:U57">cos(<span class="var type1" id="S5T4U80">alpha</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,25" id="srcline25">25</a></span><span class="line">    <span class="mxinfo " id="T4:U59"><span class="mxinfo " id="T4:U60"><span class="var type1" id="S2T48U84">u</span>(<span class="mxinfo " id="T4:U62">2</span>)</span> = <span class="mxinfo " id="T4:U63">(<span class="mxinfo " id="T4:U64"><span class="mxinfo " id="T4:U65"><span class="mxinfo " id="T4:U66"><span class="mxinfo " id="T4:U67"><span class="mxinfo " id="T4:U68"><span class="var type1" id="S4T7U93">kC</span>.l2</span> + <span class="mxinfo " id="T4:U70"><span class="mxinfo " id="T4:U71"><span class="var type1" id="S4T7U97">kC</span>.l3</span>*<span class="mxinfo " id="T4:U73">cos(<span class="mxinfo " id="T4:U74">-<span class="var type1" id="S6T4U102">beta</span></span>)</span></span></span>+<span class="mxinfo " id="T4:U76"><span class="mxinfo " id="T4:U77"><span class="var type1" id="S4T7U105">kC</span>.l4</span>*<span class="mxinfo " id="T4:U79">cos(<span class="mxinfo " id="T4:U80"><span class="var type1" id="S4T7U110">kC</span>.zeta</span>)</span></span></span>+<span class="mxinfo " id="T4:U82"><span class="mxinfo " id="T4:U83"><span class="var type1" id="S4T7U114">kC</span>.l5</span>*<span class="mxinfo " id="T4:U85">cos(<span class="mxinfo " id="T4:U86"><span class="var type1" id="S7T4U119">gamma</span>+<span class="mxinfo " id="T4:U88"><span class="var type1" id="S4T7U121">kC</span>.zeta</span></span>)</span></span></span>-<span class="mxinfo " id="T4:U90"><span class="var type1" id="S4T7U124">kC</span>.l7</span></span>).*<span class="mxinfo " id="T4:U92">sin(<span class="var type1" id="S5T4U128">alpha</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,26" id="srcline26">26</a></span><span class="line">    <span class="mxinfo " id="T4:U94"><span class="mxinfo " id="T4:U95"><span class="var type1" id="S2T48U132">u</span>(<span class="mxinfo " id="T4:U97">3</span>)</span> = (<span class="mxinfo " id="T4:U98"><span class="mxinfo " id="T4:U99"><span class="mxinfo " id="T4:U100"><span class="mxinfo " id="T4:U101"><span class="mxinfo " id="T4:U102"><span class="mxinfo " id="T4:U103"><span class="var type1" id="S4T7U141">kC</span>.l1</span> + <span class="mxinfo " id="T4:U105"><span class="mxinfo " id="T4:U106"><span class="var type1" id="S4T7U145">kC</span>.l3</span>*<span class="mxinfo " id="T4:U108">sin(<span class="mxinfo " id="T4:U109">-<span class="var type1" id="S6T4U150">beta</span></span>)</span></span></span>-<span class="mxinfo " id="T4:U111"><span class="mxinfo " id="T4:U112"><span class="var type1" id="S4T7U153">kC</span>.l4</span>*<span class="mxinfo " id="T4:U114">sin(<span class="mxinfo " id="T4:U115"><span class="var type1" id="S4T7U158">kC</span>.zeta</span>)</span></span></span>-<span class="mxinfo " id="T4:U117"><span class="mxinfo " id="T4:U118"><span class="var type1" id="S4T7U162">kC</span>.l5</span>*<span class="mxinfo " id="T4:U120">sin(<span class="mxinfo " id="T4:U121"><span class="var type1" id="S7T4U167">gamma</span>+<span class="mxinfo " id="T4:U123"><span class="var type1" id="S4T7U169">kC</span>.zeta</span></span>)</span></span></span>-<span class="mxinfo " id="T4:U125"><span class="var type1" id="S4T7U172">kC</span>.l6</span></span>-(<span class="mxinfo " id="T4:U127"><span class="mxinfo " id="T4:U128"><span class="var type1" id="S4T7U177">kC</span>.l8</span>+<span class="mxinfo " id="T4:U130"><span class="var type1" id="S4T7U180">kC</span>.r</span></span>)</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="100,27" id="srcline27">27</a></span><span class="line">   </span></span>
<span class="srcline"><span class="lineno"><a href="100,28" id="srcline28">28</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="100,29" id="srcline29">29</a></span><span class="line"></span></span>
</pre>
