<pre class="code">
<span class="srcline"><span class="lineno"><a href="89,1" id="srcline1"> 1</a></span><span class="line"><span class="comment">%GETXSTAR Returns the xStar value given either the height of the wheel</span></span></span>
<span class="srcline"><span class="lineno"><a href="89,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">%contact              </span></span></span>
<span class="srcline"><span class="lineno"><a href="89,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">%point relative to the pan coordinate frame and either the beta or gamma</span></span></span>
<span class="srcline"><span class="lineno"><a href="89,4" id="srcline4"> 4</a></span><span class="line"><span class="comment">%joint value. It is assumed that the angle input represents the beta joint</span></span></span>
<span class="srcline"><span class="lineno"><a href="89,5" id="srcline5"> 5</a></span><span class="line"><span class="comment">%angle if selector = false, and the angle input is the gamma joint angle if</span></span></span>
<span class="srcline"><span class="lineno"><a href="89,6" id="srcline6"> 6</a></span><span class="line"><span class="comment">%selector = true</span></span></span>
<span class="srcline"><span class="lineno"><a href="89,7" id="srcline7"> 7</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="89,8" id="srcline8"> 8</a></span><span class="line"><span class="comment">%Inputs:</span></span></span>
<span class="srcline"><span class="lineno"><a href="89,9" id="srcline9"> 9</a></span><span class="line"><span class="comment">%-z: The height from the pan coordinate frame to the wheel contact point.</span></span></span>
<span class="srcline"><span class="lineno"><a href="89,10" id="srcline10">10</a></span><span class="line"><span class="comment">%-angle: The angular value that is either beta or gamma, depending on the</span></span></span>
<span class="srcline"><span class="lineno"><a href="89,11" id="srcline11">11</a></span><span class="line"><span class="comment">%selector input.</span></span></span>
<span class="srcline"><span class="lineno"><a href="89,12" id="srcline12">12</a></span><span class="line"><span class="comment">%-selector: A logical that indicates that the angle value represents beta</span></span></span>
<span class="srcline"><span class="lineno"><a href="89,13" id="srcline13">13</a></span><span class="line"><span class="comment">%-kC: A struct containing the kinematic constants of the Sherpa TT leg.</span></span></span>
<span class="srcline"><span class="lineno"><a href="89,14" id="srcline14">14</a></span><span class="line"><span class="comment">%                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 </span></span></span>
<span class="srcline"><span class="lineno"><a href="89,15" id="srcline15">15</a></span><span class="line"><span class="comment">%if selector=true, or gamma if selector=false.</span></span></span>
<span class="srcline"><span class="lineno"><a href="89,16" id="srcline16">16</a></span><span class="line"><span class="comment">%Outputs:</span></span></span>
<span class="srcline"><span class="lineno"><a href="89,17" id="srcline17">17</a></span><span class="line"><span class="comment">%-xStar: The radius in a cylindrical coordinate representation that</span></span></span>
<span class="srcline"><span class="lineno"><a href="89,18" id="srcline18">18</a></span><span class="line"><span class="comment">%connects the pan coordinate frame to the wheel contact coordinate frame.</span></span></span>
<span class="srcline"><span class="lineno"><a href="89,19" id="srcline19">19</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="89,20" id="srcline20">20</a></span><span class="line"><span class="comment">%sherpaTTFK.m</span></span></span>
<span class="srcline"><span class="lineno"><a href="89,21" id="srcline21">21</a></span><span class="line"><span class="comment">%author: wreid</span></span></span>
<span class="srcline"><span class="lineno"><a href="89,22" id="srcline22">22</a></span><span class="line"><span class="comment">%date: 20150216</span></span></span>
<span class="srcline"><span class="lineno"><a href="89,23" id="srcline23">23</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="89,24" id="srcline24">24</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S2T4U3">xStar</span> = getXStar(<span class="var type1" id="S3T4U6">z</span>,<span class="var type1" id="S4T4U7">angle</span>,<span class="var type1" id="S5T1U8">selector</span>,<span class="var type1" id="S6T7U9">kC</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="89,25" id="srcline25">25</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="89,26" id="srcline26">26</a></span><span class="line">    <span class="mxinfo " id="T4:U6"><span class="var type1" id="S7T4U12">A</span> = <span class="mxinfo " id="T4:U8"><span class="mxinfo " id="T4:U9"><span class="mxinfo " id="T4:U10"><span class="var type1" id="S6T7U16">kC</span>.l2</span>+<span class="mxinfo " id="T4:U12"><span class="mxinfo " id="T4:U13"><span class="var type1" id="S6T7U20">kC</span>.l4</span>*<span class="mxinfo " id="T4:U15">cos(<span class="mxinfo " id="T4:U16"><span class="var type1" id="S6T7U25">kC</span>.zeta</span>)</span></span></span>-<span class="mxinfo " id="T4:U18"><span class="var type1" id="S6T7U28">kC</span>.l7</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="89,27" id="srcline27">27</a></span><span class="line">    <span class="mxinfo " id="T4:U20"><span class="var type1" id="S9T4U32">B</span> = <span class="mxinfo " id="T4:U22"><span class="mxinfo " id="T4:U23"><span class="mxinfo " id="T4:U24"><span class="mxinfo " id="T4:U25"><span class="mxinfo " id="T4:U26"><span class="var type1" id="S6T7U38">kC</span>.l1</span>-<span class="mxinfo " id="T4:U28"><span class="mxinfo " id="T4:U29"><span class="var type1" id="S6T7U42">kC</span>.l4</span>*<span class="mxinfo " id="T4:U31">sin(<span class="mxinfo " id="T4:U32"><span class="var type1" id="S6T7U47">kC</span>.zeta</span>)</span></span></span>-<span class="mxinfo " id="T4:U34"><span class="var type1" id="S6T7U50">kC</span>.l6</span></span>-<span class="mxinfo " id="T4:U36"><span class="var type1" id="S6T7U53">kC</span>.l8</span></span>-<span class="mxinfo " id="T4:U38"><span class="var type1" id="S6T7U56">kC</span>.r</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="89,28" id="srcline28">28</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="89,29" id="srcline29">29</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T1:U40">~<span class="var type1" id="S5T1U61">selector</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="89,30" id="srcline30">30</a></span><span class="line">        <span class="mxinfo " id="T4:U42"><span class="var type1" id="S2T4U64">xStar</span> = <span class="mxinfo " id="T4:U44"><span class="mxinfo " id="T4:U45"><span class="var type1" id="S7T4U67">A</span>+<span class="mxinfo " id="T4:U47"><span class="mxinfo " id="T4:U48"><span class="var type1" id="S6T7U70">kC</span>.l3</span>*<span class="mxinfo " id="T4:U50">cos(<span class="mxinfo " id="T4:U51">asin(<span class="mxinfo " id="T4:U52">(<span class="mxinfo " id="T4:U53"><span class="mxinfo " id="T4:U54"><span class="mxinfo " id="T4:U55">-<span class="var type1" id="S3T4U81">z</span></span>+<span class="var type1" id="S9T4U82">B</span></span>-<span class="mxinfo " id="T4:U58"><span class="mxinfo " id="T4:U59"><span class="var type1" id="S6T7U85">kC</span>.l5</span>*<span class="mxinfo " id="T4:U61">sin(<span class="mxinfo " id="T4:U62"><span class="mxinfo " id="T4:U63"><span class="var type1" id="S6T7U91">kC</span>.zeta</span>+<span class="var type1" id="S4T4U93">angle</span></span>)</span></span></span>)/<span class="mxinfo " id="T4:U66"><span class="var type1" id="S6T7U95">kC</span>.l3</span></span>)</span>)</span></span></span>+<span class="mxinfo " id="T4:U68"><span class="mxinfo " id="T4:U69"><span class="var type1" id="S6T7U99">kC</span>.l5</span>*<span class="mxinfo " id="T4:U71">cos(<span class="mxinfo " id="T4:U72"><span class="mxinfo " id="T4:U73"><span class="var type1" id="S6T7U105">kC</span>.zeta</span>+<span class="var type1" id="S4T4U107">angle</span></span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="89,31" id="srcline31">31</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="89,32" id="srcline32">32</a></span><span class="line">        <span class="mxinfo " id="T4:U76"><span class="var type1" id="S2T4U111">xStar</span> = <span class="mxinfo " id="T4:U78"><span class="mxinfo " id="T4:U79"><span class="var type1" id="S7T4U114">A</span>+<span class="mxinfo " id="T4:U81"><span class="mxinfo " id="T4:U82"><span class="var type1" id="S6T7U117">kC</span>.l3</span>*<span class="mxinfo " id="T4:U84">cos(<span class="var type1" id="S4T4U121">angle</span>)</span></span></span>+<span class="mxinfo " id="T4:U86"><span class="mxinfo " id="T4:U87"><span class="var type1" id="S6T7U124">kC</span>.l5</span>*<span class="mxinfo " id="T4:U89">cos(<span class="mxinfo " id="T4:U90">asin(<span class="mxinfo " id="T4:U91">(<span class="mxinfo " id="T4:U92"><span class="mxinfo " id="T4:U93"><span class="var type1" id="S9T4U134">B</span>-<span class="mxinfo " id="T4:U95"><span class="mxinfo " id="T4:U96"><span class="var type1" id="S6T7U137">kC</span>.l3</span>*<span class="mxinfo " id="T4:U98">sin(<span class="var type1" id="S4T4U141">angle</span>)</span></span></span>-<span class="var type1" id="S3T4U142">z</span></span>)/<span class="mxinfo " id="T4:U101"><span class="var type1" id="S6T7U144">kC</span>.l5</span></span>)</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="89,33" id="srcline33">33</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="89,34" id="srcline34">34</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="89,35" id="srcline35">35</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="89,36" id="srcline36">36</a></span><span class="line"></span></span>
</pre>
